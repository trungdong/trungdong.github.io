<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Dong Huynh, ">

        <link rel="alternate"  href="http://trungdong.github.io/feeds/all.atom.xml" type="application/atom+xml" title="Dong Huynh Full Atom Feed"/>

        <title>PROV Python 1.4.0 // Dong Huynh // </title>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://trungdong.github.io/theme/css/pure.css">
    <link rel="stylesheet" href="http://trungdong.github.io/theme/css/pygments.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.0.1/jquery.fitvids.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".content").fitVids();
        });
    </script>
</head>

<body>
<div class="pure-g-r" id="layout">
    <div class="sidebar sidebar-article pure-u">
        <header class="header-article">
            <hgroup>
                <a href="http://trungdong.github.io/author/dong-huynh.html" title="See posts by Dong Huynh">
                </a>
                <h2 class="article-info">Dong Huynh</h2>
                <small class="about-author"></small>
                <h5>Published</h5>
                <p>Fri 14 August 2015</p>
                <a href="/">&larr;Home</a>
            </hgroup>
        </header>
    </div>
    <div class="pure-u">
        <div class="content">
            <section class="post">
                <header class="post-header">
                    <h1>PROV Python 1.4.0</h1>
                        <p class="post-meta">
                            // under                                 <a class="post-category" href="http://trungdong.github.io/tag/provpy.html">ProvPy</a>
                                <a class="post-category" href="http://trungdong.github.io/tag/provstore.html">ProvStore</a>
                                <a class="post-category" href="http://trungdong.github.io/tag/python.html">Python</a>
                                <a class="post-category" href="http://trungdong.github.io/tag/prov-json.html">PROV-JSON</a>
                        </p>
                </header>
            </section>
            <p>Last night, I released a new version of <a href="https://pypi.python.org/pypi/prov">PROV Python library</a>, version 1.4.0. It fixes <a href="https://github.com/trungdong/prov/issues/68">the prov:QUALIFIED_NAME bug</a> that I had inadvertently introduced since the inception of the library. <a href="http://lucmoreau.github.io/ProvToolbox/">ProvToolbox</a> recently fixed the same bug (since <a href="https://lucmoreau.wordpress.com/2015/07/24/what-is-in-provtoolbox-0-7-0/">version 0.7.0</a>), and with this release, the two libraries are again compatible with each other.</p>
<p>This release is somewhat significant as existing provenance documents generated by previous versions of the library <em>may</em> no longer work with this version (and future versions). Before I discuss the details, the main changes in this release are:</p>
<ul>
<li>Changed the type of qualified names to prov:QUALIFIED_NAME</li>
<li>Removed XSDQName class and stopped supporting parsing xsd:QName as qualified names</li>
<li>Replaced pydot dependency with <a href="http://pydotplus.readthedocs.org/">pydotplus</a></li>
<li>Removed support for Python 2.6</li>
</ul>
<h2>prov:QUALIFIED_NAME, prov:QualifiedName, and xsd:QName</h2>
<p>W3C's PROV-DM defined the abstract concept of <a href="http://www.w3.org/TR/2013/REC-prov-dm-20130430/#term-qualified-name">Qualified Name</a> but not a concrete type for it. Previously, I wrongly assumed the type for qualified names is <strong>prov:QualifiedName</strong>, which turned out to be not even a defined concept in any of the PROV documents. The type was then used mainly in <a href="http://www.w3.org/Submission/2013/SUBM-prov-json-20130424/">PROV-JSON</a> serialisations produced by the prov library and, sometimes, also seeped into its PROV-N outputs.</p>
<p>PROV-N, as it happened, did <a href="http://www.w3.org/TR/2013/REC-prov-n-20130430/#expression-literal">define the type</a> for PROV's qualified names as <strong>prov:QUALIFIED_NAME</strong> â€” a fact somehow escaped me. This release replaced prov:QualifiedName with prov:QUALIFIED_NAME. Hence, literals of prov:QualifiedName type in existing PROV-JSON documents will no longer be recognised as qualified names by prov 1.4.0 and later. However, such documents should still be readable by the library, albeit with different semantics.</p>
<p>Regarding <strong>xsd:QName</strong>, the type had been treated as a sub-type of prov:QualifiedName, and hence, had been recognised as qualified names in the prov library. This means that the library would try to resolve the prefix provided in a xsd:QName value to one of the defined namespaces in the containing document. Such behaviour is not expected; in fact, xsd:QName and prov:QUALIFIED_NAME are incompatible types (see <a href="https://github.com/lucmoreau/ProvToolbox/wiki/Qualified-Names-in-ProvToolbox">Luc's page on Qualified Names</a> for more information). Hence, I decided to removed XSDQName class from the prov library, effectively removing support for resolving xsd:QName values into qualified names.</p>
<h2>Python 2.6 no longer supported</h2>
<p>The 2.6 branch of Python had been at its end of life since Oct 2013 with the <a href="https://www.python.org/download/releases/2.6.9/">2.6.9 release</a>. The prov library's support for Python 2.6 had been requiring extra effort in writing codes for it and testing them, in addition to those to support Python 3. With more and more libraries dropping support for Python 2.6 (including networkx and pydotplus, which are used by prov), I think it is time for prov to move on. From version 1.4.0, prov no longer works with Python 2.6. It remains working with, and being tested for, Python 2.7, 3.3, 3.4, and PyPy.</p>
<h2>pydot and pydotplus</h2>
<p><strong>pydot</strong> had been used to represent PROV documents in the DOT format, allowing for the conversion of such documents into SVG, PNG, PDF, and other graphical formats supported by the excellent <a href="http://www.graphviz.org">Graphviz</a> package. The pydot, however, have not been updated for over 4 years. The official package does not work with Python 3 and, as a result, we had to use an unofficial fork. In this release, we decided to use <a href="http://pydotplus.readthedocs.org/"><strong>pydotplus</strong></a>, a drop-in replace for pydot that works with Python 3.</p>
<p>At the same time, I took the opportunity to create a test for the DOT generation feature of prov. Although I still cannot find a way to verify the graphical outputs programmatically, the test at least exercises the code for this feature over the library's extensive test suite.</p>
<h2>Endnote</h2>
<p>As this release introduces some significant changes, I would love to hear about any issue or feedback you might have. Please report them to the library's <a href="https://github.com/trungdong/prov/issues">issue tracker</a>. Many thanks!</p>
            <div class="hr"></div>
            <a href="#" class="go-top">Go Top</a>
<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = "trungdong-github-io"; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div><footer class="footer">
    <p>&copy; Dong Huynh &ndash;
        Built with <a href="http://blog.getpelican.com/">Pelican</a> based on <a href="https://github.com/PurePelicanTheme/pure">Pure Theme</a>
    </p>
</footer>        </div>
    </div>
</div>
    <script>
        var $top = $('.go-top');

        // Show or hide the sticky footer button
        $(window).scroll(function() {
            if ($(this).scrollTop() > 200) {
                $top.fadeIn(200);
            } else {
                $top.fadeOut(200);
            }
        });

        // Animate the scroll to top
        $top.click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, 300);
        })

        // Makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        $('body').on('click', 'a[href="#"]', function(event) {
            event.preventDefault();
        });
    </script>
    <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
        try {
            var pageTracker = _gat._getTracker("UA-264417-8");
            pageTracker._trackPageview();
            } catch(err) {}
    </script>
</body>
</html>